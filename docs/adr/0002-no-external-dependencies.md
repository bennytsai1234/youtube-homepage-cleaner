# ADR-002: é›¶å¤–éƒ¨ä¾è³´åŸå‰‡ | No External Dependencies

| é …ç›® | å…§å®¹ |
|------|------|
| **ç‹€æ…‹** | âœ… Accepted |
| **æ—¥æœŸ** | 2025-11-01 |
| **æ±ºç­–è€…** | Benny, AI Collaborators |

---

## Context | èƒŒæ™¯

åœ¨é–‹ç™¼ userscript æ™‚ï¼Œæˆ‘å€‘é¢è‡¨æ˜¯å¦å¼•å…¥å¤–éƒ¨ç¨‹å¼åº«çš„æ±ºç­–ã€‚å¸¸è¦‹çš„é¸æ“‡åŒ…æ‹¬ï¼š

- jQuery (DOM æ“ä½œ)
- Lodash (å·¥å…·å‡½æ•¸)
- React/Vue (UI æ¡†æ¶)
- CSS æ¡†æ¶ (Tailwind, Bootstrap)

### è€ƒé‡å› ç´  | Considerations

1. **å®‰å…¨æ€§**: ç¬¬ä¸‰æ–¹ç¨‹å¼åº«å¯èƒ½åŒ…å«æƒ¡æ„ç¨‹å¼ç¢¼
2. **æ•ˆèƒ½**: é¡å¤–çš„ç¶²è·¯è«‹æ±‚å’Œè¼‰å…¥æ™‚é–“
3. **éš±ç§**: å¤–éƒ¨ CDN å¯è¿½è¹¤ä½¿ç”¨è€…
4. **å¯é æ€§**: å¤–éƒ¨è³‡æºå¯èƒ½é›¢ç·šæˆ–è¢«å°é–
5. **ç¶­è­·æ€§**: ä¾è³´ç‰ˆæœ¬å‡ç´šå’Œç›¸å®¹æ€§å•é¡Œ

---

## Decision | æ±ºç­–

**å®Œå…¨ä¸ä½¿ç”¨ä»»ä½•å¤–éƒ¨ä¾è³´**

æ‰€æœ‰åŠŸèƒ½ä½¿ç”¨åŸç”Ÿ JavaScript (ES6+) å’Œ CSS3 å¯¦ä½œã€‚

### å…·é«”è¦å‰‡

| é¡åˆ¥ | æ±ºç­– |
|------|------|
| **DOM æ“ä½œ** | ä½¿ç”¨åŸç”Ÿ `querySelector`, `querySelectorAll` |
| **å·¥å…·å‡½æ•¸** | è‡ªè¡Œå¯¦ä½œ `debounce`, `parseNumeric` ç­‰ |
| **UI æ¡†æ¶** | ä¸ä½¿ç”¨ï¼Œæ¡ç”¨åŸç”Ÿ `prompt/alert` |
| **CSS æ¡†æ¶** | ä¸ä½¿ç”¨ï¼Œç›´æ¥å¯« CSS è¦å‰‡ |
| **åœ–ç¤º** | ä½¿ç”¨ Emojiï¼Œä¸è¼‰å…¥ Icon fonts |

---

## Consequences | å¾Œæœ

### æ­£é¢ | Positive

- ğŸ”’ **å®‰å…¨**: å®Œå…¨æ§åˆ¶æ‰€æœ‰åŸ·è¡Œçš„ç¨‹å¼ç¢¼
- ğŸš€ **æ•ˆèƒ½**: é›¶é¡å¤–ç¶²è·¯è«‹æ±‚ï¼Œç¬é–“è¼‰å…¥
- ğŸ” **éš±ç§**: æ²’æœ‰ç¬¬ä¸‰æ–¹è¿½è¹¤
- ğŸ“¦ **ç°¡å–®**: å–®ä¸€ .js æª”æ¡ˆï¼Œæ˜“æ–¼å¯©è¨ˆå’Œåˆ†ç™¼
- â™¾ï¸ **å¯é **: ä¸ä¾è³´å¤–éƒ¨æœå‹™çš„å¯ç”¨æ€§
- ğŸ”„ **ç¨ç«‹**: ä¸å—ä¸Šæ¸¸ç‰ˆæœ¬è®Šæ›´å½±éŸ¿

### è² é¢ | Negative

- ğŸ› ï¸ **é–‹ç™¼æˆæœ¬**: éœ€è‡ªè¡Œå¯¦ä½œé€šç”¨åŠŸèƒ½
- ğŸ“š **å­¸ç¿’æ›²ç·š**: æ–°è²¢ç»è€…éœ€ç†Ÿæ‚‰åŸç”Ÿ API
- ğŸ¨ **UI é™åˆ¶**: ç„¡æ³•ä½¿ç”¨ç¾æˆçš„ UI å…ƒä»¶åº«

### ä¸­æ€§ | Neutral

- å–®æª”æ¡ˆæ¶æ§‹ä½¿ç¨‹å¼ç¢¼è¼ƒé•· (~1400 è¡Œ)
- éœ€è¦æ‰‹å‹•ç¶­è­·é¡ä¼¼ lodash çš„å·¥å…·å‡½æ•¸

---

## æ›¿ä»£æ–¹æ¡ˆæ‹’çµ•ç†ç”± | Rejected Alternatives

### jQuery

```
âŒ æ‹’çµ•åŸå› :
- ç¾ä»£ç€è¦½å™¨åŸç”Ÿ API å·²è¶³å¤ å¼·å¤§
- å¢åŠ  ~87KB è¼‰å…¥
- å®‰å…¨æ€§è€ƒé‡
```

### @require å¼•å…¥ CDN è³‡æº

```
âŒ æ‹’çµ•åŸå› :
- CDN å¯è¢« ISP/é˜²ç«ç‰†å°é–
- å¢åŠ éš±ç§é¢¨éšª
- éœ€è¦é¡å¤–çš„ @connect æ¬Šé™
```

### è‡ªè¨‚ UI Modal

```
âŒ æ‹’çµ•åŸå›  (åƒè¦‹ ADR-005):
- å¢åŠ ç¶­è­·æˆæœ¬
- prompt/alert å·²è¶³å¤ åŠŸèƒ½éœ€æ±‚
```

---

## å¯¦ä½œç¯„ä¾‹ | Implementation Example

```javascript
// è‡ªè¡Œå¯¦ä½œçš„ debounceï¼Œç„¡éœ€ lodash
const Utils = {
    debounce: (func, delay) => {
        let t;
        return (...args) => {
            clearTimeout(t);
            t = setTimeout(() => func(...args), delay);
        };
    }
};

// åŸç”Ÿ DOM æ“ä½œï¼Œç„¡éœ€ jQuery
const container = document.querySelector('ytd-rich-item-renderer');
if (container?.classList.contains('ytd-rich-grid-row')) {
    container.style.display = 'none';
}
```

---

## References | åƒè€ƒè³‡æ–™

- [You Might Not Need jQuery](http://youmightnotneedjquery.com/)
- [Tampermonkey Security Best Practices](https://www.tampermonkey.net/documentation.php)
